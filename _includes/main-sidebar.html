<!-- Floating Sidebar -->
<aside class="floating-sidebar" id="floatingSidebar">
    <nav class="floating-nav" role="navigation">
        <ul class="floating-nav-list">
            <li class="floating-nav-item">
                <a href="/" class="floating-nav-link" data-page="home">
                    <span>Home</span>
                </a>
            </li>
            <li class="floating-nav-item">
                <a href="#yarn-section" class="floating-nav-link" data-page="yarn">
                    <span>Yarn preview</span>
                </a>
            </li>
            <li class="floating-nav-item">
                <a href="#collage-section" class="floating-nav-link" data-page="overview">
                    <span>Overview</span>
                </a>
            </li>
            <li class="floating-nav-item">
                <a href="/courses/" class="floating-nav-link" data-page="courses">
                    <span>Courses</span>
                </a>
            </li>
            <li class="floating-nav-item">
                <a href="/projects/" class="floating-nav-link" data-page="projects">
                    <span>Projects</span>
                </a>
            </li>
            <li class="floating-nav-item">
                <a href="/insights/" class="floating-nav-link" data-page="insights">
                    <span>Insights &amp; Analysis</span>
                </a>
            </li>
            <li class="floating-nav-item">
                <a href="/research/" class="floating-nav-link" data-page="research">
                    <span>Research</span>
                </a>
            </li>
        </ul>
    </nav>
</aside>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        console.log('ðŸš€ Simple page navigation loaded');

        const overviewLink = document.querySelector('[data-page="overview"]');
        const yarnLinks = document.querySelectorAll('[data-page="yarn"]');
        const exploreBtn = document.getElementById('exploreBtn');
        const scrollIndicator = document.querySelector('.scroll-indicator');
        const scrollArrow = document.querySelector('.scroll-arrow');
        const collageItems = document.querySelectorAll('.collage-item[data-section]');

        function scrollToSection(targetId) {
            const target = document.getElementById(targetId);
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        function scrollToOverview(e) {
            e.preventDefault();
            scrollToSection('collage-section');
        }

        function scrollToYarn(e) {
            if (e) {
                e.preventDefault();
            }
            scrollToSection('yarn-section');
        }

        if (overviewLink) {
            overviewLink.addEventListener('click', scrollToOverview);
        }

        yarnLinks.forEach(link => link.addEventListener('click', scrollToYarn));

        if (exploreBtn) {
            exploreBtn.addEventListener('click', scrollToYarn);
        }

        if (scrollIndicator) {
            scrollIndicator.addEventListener('click', scrollToYarn);
        }

        if (scrollArrow) {
            scrollArrow.addEventListener('click', scrollToYarn);
        }

        const observerOptions = {
            root: null,
            rootMargin: '0px 0px -100px 0px',
            threshold: 0.1
        };

        const collageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.classList.add('item-animate-in');
                    }, Math.random() * 300);
                }
            });
        }, observerOptions);

        collageItems.forEach(item => {
            collageObserver.observe(item);
        });

        collageItems.forEach(item => {
            item.addEventListener('click', function () {
                const section = this.getAttribute('data-section');
                console.log('ðŸŽ¨ Collage item clicked:', section);

                const targetSection = document.getElementById(section + '-section');
                if (targetSection) {
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                } else {
                    switch (section) {
                        case 'about':
                            window.location.href = '/about/';
                            break;
                        case 'contact':
                            window.location.href = '/contact/';
                            break;
                        default:
                            console.log('Unknown section:', section);
                    }
                }
            });
        });

        console.log('âœ… Page navigation initialized');
    });
</script>
