<!DOCTYPE html>
<html lang="en" class="blog-page">

{% include head.html %}

<body class="page-top">
    {% include nav.html %}

    <!-- Hero Section -->
    <section class="layout-hero blog-hero">
        <div class="hero-overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1 text-center">
                    <div class="hero-category">
                        <span class="category-badge">{{ page.category | default: "Opinion" }}</span>
                    </div>

                    <h1 class="hero-title">{{ page.title }}</h1>

                    {% if page.subtitle %}
                    <p class="hero-subtitle">{{ page.subtitle }}</p>
                    {% endif %}

                    <div class="hero-meta">
                        <div class="meta-item">
                            <i class="fa fa-user"></i>
                            <span>{{ page.author | default: site.author | default: "Prosody Labs" }}</span>
                        </div>

                        {% if page.date %}
                        <div class="meta-item">
                            <i class="fa fa-calendar"></i>
                            <span>{{ page.date | date_to_string }}</span>
                        </div>
                        {% endif %}

                        {% if page.read_time %}
                        <div class="meta-item">
                            <i class="fa fa-clock-o"></i>
                            <span>{{ page.read_time }} min read</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="layout-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1">

                    {% if page.featured_image %}
                    <div class="featured-image">
                        <img src="{{ page.featured_image | relative_url }}" alt="{{ page.title }}">
                        {% if page.image_caption %}
                        <p class="caption">{{ page.image_caption }}</p>
                        {% endif %}
                    </div>
                    {% endif %}

                    <div class="article-body">
                        {{ content }}
                    </div>

                    <!-- Table of Contents -->
                    {% include table-of-contents.html %}

                    {% if page.tags and page.tags.size > 0 %}
                    <div class="info-box tags-box">
                        <h3>
                            <i class="fa fa-tags"></i>
                            Tags
                        </h3>
                        <div class="tags-list">
                            {% for tag in page.tags %}
                            <span class="tag">{{ tag }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    <!-- Social Sharing -->
                    <div class="social-sharing">
                        <h3>
                            <i class="fa fa-share-alt"></i>
                            Share this article
                        </h3>
                        <div class="sharing-buttons">
                            <!-- Twitter -->
                            <a href="https://twitter.com/intent/tweet?text={{ page.title | url_encode }}&url={{ site.url }}{{ page.url | url_encode }}"
                                target="_blank" rel="noopener noreferrer" class="share-btn twitter-btn"
                                title="Share on Twitter">
                                <i class="fa fa-twitter"></i>
                                <span>Twitter</span>
                            </a>

                            <!-- LinkedIn -->
                            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ site.url }}{{ page.url | url_encode }}"
                                target="_blank" rel="noopener noreferrer" class="share-btn linkedin-btn"
                                title="Share on LinkedIn">
                                <i class="fa fa-linkedin"></i>
                                <span>LinkedIn</span>
                            </a>

                            <!-- Facebook -->
                            <a href="https://www.facebook.com/sharer/sharer.php?u={{ site.url }}{{ page.url | url_encode }}"
                                target="_blank" rel="noopener noreferrer" class="share-btn facebook-btn"
                                title="Share on Facebook">
                                <i class="fa fa-facebook"></i>
                                <span>Facebook</span>
                            </a>

                            <!-- Email -->
                            <a href="mailto:{{ site.email }}?subject={{ page.title | url_encode }}&body=I thought you might find this article interesting: {{ site.url }}{{ page.url | url_encode }}"
                                class="share-btn email-btn" title="Share via Email">
                                <i class="fa fa-envelope"></i>
                                <span>Email</span>
                            </a>

                            <!-- Copy Link -->
                            <button onclick="copyToClipboard('{{ site.url }}{{ page.url }}')" class="share-btn copy-btn"
                                title="Copy Link">
                                <i class="fa fa-link"></i>
                                <span>Copy Link</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <!-- Navigation -->
    <section class="content-navigation">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <div class="nav-container">


                    </div>
                </div>
            </div>
        </div>
    </section>

    {% include scripts.html %}

    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function () {
                // Show success feedback
                const button = event.target.closest('.copy-btn');
                const originalContent = button.innerHTML;
                button.innerHTML = '<i class="fa fa-check"></i><span>Copied!</span>';
                button.classList.add('copied');

                setTimeout(function () {
                    button.innerHTML = originalContent;
                    button.classList.remove('copied');
                }, 2000);
            }).catch(function (err) {
                console.error('Failed to copy: ', err);
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);

                const button = event.target.closest('.copy-btn');
                const originalContent = button.innerHTML;
                button.innerHTML = '<i class="fa fa-check"></i><span>Copied!</span>';
                button.classList.add('copied');

                setTimeout(function () {
                    button.innerHTML = originalContent;
                    button.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>

</html>